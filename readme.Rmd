Readme
========================================================

Date: `r format(Sys.Date(), format="%B %d %Y")`

### List of files

```{r,echo=FALSE,results='asis'}
library(xtable)

#list of descriptions
known_files <- list(readme = list(file_name = "readme.Rmd",
                                  descr = "A template for automatically generated readme. Date and list of file included."),
                    parsed_readme = list(file_name = "readme.md",
                                         descr = paste0("Parsed readme.Rmd")),
                    start = list(file_name = "start.R",
                                 descr = "All packages, variables and so on universally needed for the research. Should be sourced every time."),
                    cs_analysis = list(file_name = "cs_analysis.R",
                                 descr = "Analysis of cleavage sites amino acid composition.")
                    )

known_files_names <- sapply(known_files, function(i) i[["file_name"]])

#all files in repo that aren't in gitignore
repo_files <- sort(setdiff(list.files(), readLines(".gitignore")[- grep("^\\.", readLines(".gitignore"))]))

if(!all(repo_files %in% known_files_names)) {
  message(paste0("Michal, you slacker! File(s): ",
                 paste(repo_files[!repo_files %in% known_files_names], collapse = ", "), 
                 " do not have a proper description."))
  repo_files <- repo_files[repo_files %in% known_files_names]
  }


files_table <- data.frame(repo_files, sapply(repo_files, function(i) known_files[[which(i == known_files_names)]][["descr"]]))
colnames(files_table) <- c("File name", "Description")
print(xtable(files_table), type = "html", include.rownames = FALSE)
```

### Repository rules
1. Each file must have a desctiption in readme using the R code in *readme.Rmd*.
2. Use comments frequently.